ADR-005: Use Managed Identities for Azure resource access

Context

Services (AKS pods, Functions) need secure, least-privilege access to Azure resources like Key Vault, CosmosDB, and Storage.

Decision

Use System-Assigned and User-Assigned Managed Identities wherever possible instead of service principals. Grant least-privilege RBAC roles and use Key Vault access policies to limit secrets access.

Alternatives

- Use Azure AD service principals with client secrets stored in Key Vault.
- Use certificate-based authentication for service principals.

Trade-offs

- Managed Identities simplify credential management and reduce secret sprawl but may have limitations when accessing resources across subscriptions without proper configuration.
- Service principals provide more flexible cross-tenant access patterns but require secret rotation and storage.

Status

Accepted
